!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},r=n.parcelRequired76b;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){o[e]=n},n.parcelRequired76b=r);var a=r("kfhZi"),i=r("eI9Bk");r("dTADz");var c=r("bpxeT"),s=r("2TvXO");r("7rQOT");var l,u=r("fivgP"),d=r("dIxxU"),h=(c=r("bpxeT"),s=r("2TvXO"),r("7rQOT")),p=r("3likm"),m=document.querySelector(".gallery"),g=(l=e(c)(e(s).mark((function n(t){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.fetchGenres)();case 3:o=e.sent.genres,h.Loading.hourglass(),m.insertAdjacentHTML("afterbegin",v(t,o)),h.Loading.remove(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),n,null,[[0,9]])}))),function(e){return l.apply(this,arguments)}),v=function(e,n){return'\n      <li class="movieCard">\n              <a data-id="'.concat(e.id,'">\n                  <img class="movieCard__image" src="https://image.tmdb.org/t/p/w500').concat(e.poster_path,'" alt="movieImg" />\n                  <p class="movieCard__info movieCard__title">').concat(f(e.title),'</p>\n                      <p class="movieCard__info movieCard__description">').concat(b(n)," | ").concat(e.release_date.slice(0,4),"</p>\n              </a>\n      </li>\n    ")},f=function(e){return e.length>30?e.slice(0,30)+"...":e},b=function(e){var n=[],t=!0,o=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;n.push(c.name)}}catch(e){o=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(o)throw r}}switch(!0){case n.length>2:return"".concat(n[0],", ").concat(n[1],", other...");case 2===n.length:return"".concat(n[0],", ").concat(n[1]);case 1===n.length:return"".concat(n[0])}},y=r("iNWLi"),L=r("cokon"),k=r("gQOBw"),_=document.querySelector(".header_btn-queue"),S=document.querySelector(".header_btn-watched"),w=document.querySelector(".gallery"),x="ac91775ba29254b7e75060011bf34a90";function E(){return q.apply(this,arguments)}function q(){return(q=e(c)(e(s).mark((function n(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.classList.remove("current-btn"),S.classList.add("current-btn"),w.innerHTML="",(0,k.onAuthStateChanged)(y.auth,(function(e){e?(0,L.get)((0,L.child)(y.dbRef,"users/".concat(e.uid,"/watched"))).then((function(e){e.exists()?Object.values(e.val()).forEach((function(e){d.default.get("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(x,"&language=en-US")).then((function(e){var n=e.data;return g(n)}))})):u.Report.info("No movies in collection now","Add movies to see them here")})).catch((function(e){console.error(e)})):console.log("no user")}));case 4:case"end":return e.stop()}}),n)})))).apply(this,arguments)}S.addEventListener("click",E),E();c=r("bpxeT"),s=r("2TvXO"),d=r("dIxxU"),c=r("bpxeT"),s=r("2TvXO"),h=r("7rQOT"),p=r("3likm");var I=document.querySelector(".gallery"),U=function(){var n=e(c)(e(s).mark((function n(t){var o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.fetchGenres)();case 3:o=e.sent.genres,h.Loading.hourglass(),I.insertAdjacentHTML("afterbegin",M(t,o)),h.Loading.remove(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}(),M=function(e,n){return'\n      <li class="movieCard">\n              <a data-id="'.concat(e.id,'">\n                  <img class="movieCard__image" src="https://image.tmdb.org/t/p/w500').concat(e.poster_path,'" alt="movieImg" />\n                  <p class="movieCard__info movieCard__title">').concat(T(e.title),'</p>\n                      <p class="movieCard__info movieCard__description">').concat(C(n)," | ").concat(e.release_date.slice(0,4),"</p>\n              </a>\n      </li>\n    ")},T=function(e){return e.length>30?e.slice(0,30)+"...":e},C=function(e){var n=[],t=!0,o=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;n.push(c.name)}}catch(e){o=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(o)throw r}}switch(!0){case n.length>2:return"".concat(n[0],", ").concat(n[1],", other...");case 2===n.length:return"".concat(n[0],", ").concat(n[1]);case 1===n.length:return"".concat(n[0])}},O=(u=r("fivgP"),y=r("iNWLi"),L=r("cokon"),k=r("gQOBw"),document.querySelector(".header_btn-queue")),W=document.querySelector(".header_btn-watched"),A=document.querySelector(".gallery"),P="ac91775ba29254b7e75060011bf34a90";function R(){return(R=e(c)(e(s).mark((function n(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W.classList.remove("current-btn"),O.classList.add("current-btn"),A.innerHTML="",(0,k.onAuthStateChanged)(y.auth,(function(e){e?(0,L.get)((0,L.child)(y.dbRef,"users/".concat(e.uid,"/queue"))).then((function(e){e.exists()?Object.values(e.val()).forEach((function(e){d.default.get("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(P,"&language=en-US")).then((function(e){var n=e.data;return U(n)}))})):u.Report.info("No movies in collection now","Add movies to see them here")})).catch((function(e){console.error(e)})):console.log("no user")}));case 4:case"end":return e.stop()}}),n)})))).apply(this,arguments)}O.addEventListener("click",(function(){return R.apply(this,arguments)})),r("2Alfd"),r("1KXgy"),r("6R4lm"),r("5xtVg");c=r("bpxeT");var B=r("hKHmD"),j=(s=r("2TvXO"),r("fkNhc"));r("5xtVg");k=r("gQOBw"),L=r("cokon");var N=(0,j.initializeApp)({apiKey:"AIzaSyCrjIQ-i-DV-fkmDO-FB_HdRZGKiM7ste8",authDomain:"filmoteka-project9.firebaseapp.com",projectId:"filmoteka-project9",storageBucket:"filmoteka-project9.appspot.com",messagingSenderId:"1031272501813",appId:"1:1031272501813:web:a2ca2d3955cbe4cf9a577c",measurementId:"G-1NQ8JF0W90",databaseURL:"https://filmoteka-project9-default-rtdb.europe-west1.firebasedatabase.app/"}),D=(0,k.getAuth)(N),G=(0,L.getDatabase)(N),H=(0,L.ref)(G),F={btnCloseModal:document.querySelector("[data-signInModal-close]"),btnSignIn:document.querySelector("#signInModalOpen"),btnLogOut:document.querySelector("#logoutBtn"),btnLoginWithPhone:document.querySelector("#LogInWithPhoneBtn"),btnPhoneLogin:document.querySelector("#LogInPhone"),btnGoogleLogin:document.querySelector("#googleLoginBtn"),btnLoginWithEmail:document.querySelector("#loginWithEmailBtn"),btnLoginEmail:document.querySelector("#loginEmailBtn"),btnSignUpWithEmail:document.querySelector("#SignUpWitnEmailBtn"),btnSignUpEmail:document.querySelector("#SignUpBtn"),btnConfirmEmail:document.querySelector("#ConfirmEmail"),backdrop:document.querySelector("[data-signInModal]"),navigation:document.querySelector(".navigation__list"),boxUser:document.querySelector(".user__box"),boxSignInModal:document.querySelector(".signInModal__box"),boxSignInWithEmailModal:document.querySelector(".signInModal__signInWithEmail"),boxSignUpWithEmail:document.querySelector(".signInModal__signUpWithEmail"),boxLogInWithPhone:document.querySelector(".signInModal__LogInWithPhone"),boxRecaptcha:document.querySelector(".recaptcha-container"),loginEmail:document.querySelector("#email"),loginPassword:document.querySelector("#password"),signUpEmail:document.querySelector("#emailSignUp"),signUpPassword:document.querySelector("#passwordSignUp"),loginPhone:document.querySelector("#phone"),loginPhoneCode:document.querySelector("#loginPhoneCode"),modal:document.querySelector("[data-signInModal]"),userName:document.querySelector(".user__name"),formField:document.querySelector(".auth-form__field"),formTitle:document.querySelector(".auth-form__title"),body:document.querySelector("body")},Q=function(){var n=e(c)(e(s).mark((function n(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,k.onAuthStateChanged)(D,(function(e){if(e){switch(!0){case null!==e.displayName&&null!==e.photoURL:F.boxUser.innerHTML='<img class="user__img" src= '.concat(e.photoURL,' alt="" />\n                                  <div class="user__info"><p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name"> ').concat(e.displayName,"</p></div>");break;case null===e.displayName&&null===e.photoURL:F.boxUser.innerHTML='<p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name">Logged in as '.concat(e.email,"</p>")}F.navigation.innerHTML='<li class="navigation__item">\n          <a class="navigation__link " href="./index.html">HOME</a>\n        </li>\n        <li class="navigation__item">\n          <a class="navigation__link navigation__link--current" href="./my-library.html">MY LIBRARY</a>\n        </li>',F.btnSignIn.classList.add("visually-hidden"),F.btnLogOut.classList.remove("visually-hidden"),F.backdrop.classList.add("backdrop--hidden"),F.btnLogOut.addEventListener("click",K),F.btnSignIn.removeEventListener("click",X),F.body.classList.remove("scroll-hidden")}else F.boxUser.innerHTML='<p class="user__name">Hello Stranger</p>',F.navigation.innerHTML="",F.btnSignIn.classList.remove("visually-hidden"),F.btnLogOut.classList.add("visually-hidden"),F.btnLogOut.removeEventListener("click",K),F.btnSignIn.addEventListener("click",X)}))}catch(e){Y(e)}case 1:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Q();var X=function(e){event.preventDefault(),F.backdrop.classList.remove("backdrop--hidden"),F.btnGoogleLogin.addEventListener("click",ee),F.btnLoginWithEmail.addEventListener("click",Z),F.btnSignUpWithEmail.addEventListener("click",z),F.body.classList.add("scroll-hidden"),F.btnCloseModal.addEventListener("click",(function(){F.backdrop.classList.add("backdrop--hidden"),F.body.classList.remove("scroll-hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(F.backdrop.classList.add("backdrop--hidden"),F.body.classList.remove("scroll-hidden"))})),F.backdrop.addEventListener("click",(function(e){event.currentTarget===event.target&&(F.backdrop.classList.add("backdrop--hidden"),F.body.classList.remove("scroll-hidden"))})),F.backdrop.classList.contains("backdrop--hidden")&&(F.btnCloseModal.removeEventListener("click",(function(){F.backdrop.classList.add("backdrop--hidden"),F.body.classList.remove("scroll-hidden")})),window.removeEventListener("keydown",(function(e){"Escape"===e.code&&(F.backdrop.classList.add("backdrop--hidden"),F.body.classList.remove("scroll-hidden"))})),F.backdrop.removeEventListener("click",(function(e){event.currentTarget===event.target&&(F.backdrop.classList.add("backdrop--hidden"),F.body.classList.remove("scroll-hidden"))})))},K=function(){var n=e(c)(e(s).mark((function n(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.signOut)(D);case 2:document.location.href="index.html";case 3:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Y=function(e){"Firebase: Error (auth/wrong-password)."==e.message&&alert("Wrong password, Try again"),"Firebase: Error (auth/invalid-email)."==e.message?alert("Invalid email, Try again"):alert("".concat(e.message))},z=function(){F.btnGoogleLogin.removeEventListener("click",ee),F.btnLoginWithEmail.removeEventListener("click",Z),F.btnLoginEmail.removeEventListener("click",J),F.btnSignUpEmail.addEventListener("click",V),F.boxSignUpWithEmail.classList.remove("visually-hidden"),F.boxSignInModal.classList.add("visually-hidden")},V=function(){var n=e(c)(e(s).mark((function n(t){var o,r,a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=F.signUpEmail.value,r=F.signUpPassword.value,o&&r&&(F.backdrop.classList.add("backdrop--hidden"),F.boxSignUpWithEmail.classList.add("visually-hidden"),F.boxSignInModal.classList.remove("visually-hidden")),e.prev=4,e.next=7,(0,k.createUserWithEmailAndPassword)(D,o,r);case 7:a=e.sent,user=a.user,ne(user.uid,user.displayName,user.email,user.photoURL),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Y(e.t0);case 15:case"end":return e.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}(),Z=function(){F.btnGoogleLogin.removeEventListener("click",ee),F.btnLoginWithEmail.removeEventListener("click",Z),F.btnLoginEmail.addEventListener("click",J),F.boxSignInWithEmailModal.classList.remove("visually-hidden"),F.boxSignInModal.classList.add("visually-hidden")},J=function(){var n=e(c)(e(s).mark((function n(t){var o,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=F.loginEmail.value,r=F.loginPassword.value,o&&r&&(F.backdrop.classList.add("backdrop--hidden"),F.boxSignInWithEmailModal.classList.add("visually-hidden"),F.boxSignInModal.classList.remove("visually-hidden")),e.prev=4,e.next=7,(0,k.signInWithEmailAndPassword)(D,o,r);case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),Y(e.t0);case 13:case"end":return e.stop()}}),n,null,[[4,10]])})));return function(e){return n.apply(this,arguments)}}(),$=new(0,k.GoogleAuthProvider);$.addScope("https://www.googleapis.com/auth/contacts.readonly"),$.setCustomParameters({login_hint:"user@example.com"});var ee=function(e){e.preventDefault(),(0,k.signInWithPopup)(D,$).then((function(e){k.GoogleAuthProvider.credentialFromResult(e).accessToken;var n=e.user;(0,L.get)((0,L.child)(H,"users/".concat(n.uid))).then((function(e){e.exists()||ne(n.uid,n.displayName,n.email,n.photoURL)})).catch((function(e){console.error(e)}))})).catch((function(e){e.code,e.message,e.customData.email,k.GoogleAuthProvider.credentialFromError(e)}))};function ne(e,n,t,o){(0,L.set)((0,L.ref)(G,"users/"+e),{username:n,email:t,profile_picture:o})}!function(){var n=e(c)(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,k.onAuthStateChanged)(D,(function(e){e?te(e.uid,t):console.log("no user")}))}catch(e){Y(e)}case 1:case"end":return e.stop()}}),n)})))}();function te(n,t){(0,L.get)((0,L.child)(H,"users/".concat(n,"/watched"))).then((function(o){if(o.exists()){var r=Array.from(o.val()).length,a=e(B)({},r,t);(0,L.update)((0,L.child)(H,"users/".concat(n,"/watched")),a)}else{var i={watched:{0:t}};(0,L.update)((0,L.child)(H,"users/".concat(n)),i)}})).catch((function(e){console.error(e)}))}!function(){var n=e(c)(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,k.onAuthStateChanged)(D,(function(e){e?oe(e.uid,t):console.log("no user")}))}catch(e){Y(e)}case 1:case"end":return e.stop()}}),n)})))}();function oe(e,n){(0,L.get)((0,L.child)(H,"users/".concat(e,"/watched"))).then((function(t){if(t.exists()){var o=Object.values(t.val()).filter((function(e){return e!==n})),r={watched:Object.assign({},o)};(0,L.update)((0,L.child)(H,"users/".concat(e)),r)}})).catch((function(e){console.error(e)}))}!function(){var n=e(c)(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,k.onAuthStateChanged)(D,(function(e){e?re(e.uid,t):console.log("no user")}))}catch(e){Y(e)}case 1:case"end":return e.stop()}}),n)})))}();function re(n,t){(0,L.get)((0,L.child)(H,"users/".concat(n,"/queue"))).then((function(o){if(o.exists()){var r=Array.from(o.val()).length,a=e(B)({},r,t);(0,L.update)((0,L.child)(H,"users/".concat(n,"/queue")),a)}else{var i={queue:{0:t}};(0,L.update)((0,L.child)(H,"users/".concat(n)),i)}})).catch((function(e){console.error(e)}))}!function(){var n=e(c)(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,k.onAuthStateChanged)(D,(function(e){e?ae(e.uid,t):console.log("no user")}))}catch(e){Y(e)}case 1:case"end":return e.stop()}}),n)})))}();function ae(e,n){(0,L.get)((0,L.child)(H,"users/".concat(e,"/queue"))).then((function(t){if(t.exists()){var o=Object.values(t.val()).filter((function(e){return e!==n})),r={queue:Object.assign({},o)};(0,L.update)((0,L.child)(H,"users/".concat(e)),r)}})).catch((function(e){console.error(e)}))}(0,i.smoothscroll)(),window.addEventListener("scroll",a.hideScrollUpBtn)}();
//# sourceMappingURL=my-library.005ceec2.js.map
