var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},o=e.parcelRequired76b;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in t){var o=t[e];delete t[e];var a={id:e,exports:{}};return n[e]=a,o.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},e.parcelRequired76b=o);var a=o("i6cgS"),i=o("9vy3o");o("gv2Yj"),o("dSs1Y");var r=o("i37YJ"),s=o("2shzp"),l=o("dSs1Y"),d=o("7zQK0");const c=document.querySelector(".gallery"),u=async e=>{try{const{genres:n}=await(0,d.fetchGenres)();l.Loading.hourglass(),c.insertAdjacentHTML("afterbegin",m(e,n)),l.Loading.remove()}catch(e){console.error(e.message)}},m=(e,n)=>`\n      <li class="movieCard">\n              <a data-id="${e.id}">\n                  <img class="movieCard__image" src="https://image.tmdb.org/t/p/w500${e.poster_path}" alt="movieImg" />\n                  <p class="movieCard__info movieCard__title">${g(e.title)}</p>\n                      <p class="movieCard__info movieCard__description">${h(n)} | ${e.release_date.slice(0,4)}</p>\n              </a>\n      </li>\n    `,g=e=>{if(e.length>30){return e.slice(0,30)+"..."}return e},h=e=>{let n=[];for(let t of e)n.push(t.name);switch(!0){case n.length>2:return`${n[0]}, ${n[1]}, other...`;case 2===n.length:return`${n[0]}, ${n[1]}`;case 1===n.length:return`${n[0]}`}};var p=o("2ix2C"),b=o("jAzyG"),v=o("eyjy7");const y=document.querySelector(".header_btn-queue"),L=document.querySelector(".header_btn-watched"),S=document.querySelector(".gallery");async function _(){y.classList.remove("current-btn"),L.classList.add("current-btn"),S.innerHTML="",(0,v.onAuthStateChanged)(p.auth,(e=>{e?(0,b.get)((0,b.child)(p.dbRef,`users/${e.uid}/watched`)).then((e=>{if(e.exists()){Object.values(e.val()).forEach((e=>{s.default.get(`https://api.themoviedb.org/3/movie/${e}?api_key=ac91775ba29254b7e75060011bf34a90&language=en-US`).then((({data:e})=>u(e)))}))}else r.Report.info("No movies in collection now","Add movies to see them here")})).catch((e=>{console.error(e)})):console.log("no user")}))}L.addEventListener("click",_),_();s=o("2shzp"),l=o("dSs1Y"),d=o("7zQK0");const f=document.querySelector(".gallery"),E=async e=>{try{const{genres:n}=await(0,d.fetchGenres)();l.Loading.hourglass(),f.insertAdjacentHTML("afterbegin",k(e,n)),l.Loading.remove()}catch(e){console.error(e.message)}},k=(e,n)=>`\n      <li class="movieCard">\n              <a data-id="${e.id}">\n                  <img class="movieCard__image" src="https://image.tmdb.org/t/p/w500${e.poster_path}" alt="movieImg" />\n                  <p class="movieCard__info movieCard__title">${w(e.title)}</p>\n                      <p class="movieCard__info movieCard__description">${q(n)} | ${e.release_date.slice(0,4)}</p>\n              </a>\n      </li>\n    `,w=e=>{if(e.length>30){return e.slice(0,30)+"..."}return e},q=e=>{let n=[];for(let t of e)n.push(t.name);switch(!0){case n.length>2:return`${n[0]}, ${n[1]}, other...`;case 2===n.length:return`${n[0]}, ${n[1]}`;case 1===n.length:return`${n[0]}`}};r=o("i37YJ"),p=o("2ix2C"),b=o("jAzyG"),v=o("eyjy7");const I=document.querySelector(".header_btn-queue"),M=document.querySelector(".header_btn-watched"),x=document.querySelector(".gallery");I.addEventListener("click",(async function(){M.classList.remove("current-btn"),I.classList.add("current-btn"),x.innerHTML="",(0,v.onAuthStateChanged)(p.auth,(e=>{e?(0,b.get)((0,b.child)(p.dbRef,`users/${e.uid}/queue`)).then((e=>{if(e.exists()){Object.values(e.val()).forEach((e=>{s.default.get(`https://api.themoviedb.org/3/movie/${e}?api_key=ac91775ba29254b7e75060011bf34a90&language=en-US`).then((({data:e})=>E(e)))}))}else r.Report.info("No movies in collection now","Add movies to see them here")})).catch((e=>{console.error(e)})):console.log("no user")}))})),o("2mMJL"),o("1oNJL"),o("iVS7T"),o("bTcpz");var U=o("gKkQl");o("bTcpz");v=o("eyjy7"),b=o("jAzyG");const $=(0,U.initializeApp)({apiKey:"AIzaSyCrjIQ-i-DV-fkmDO-FB_HdRZGKiM7ste8",authDomain:"filmoteka-project9.firebaseapp.com",projectId:"filmoteka-project9",storageBucket:"filmoteka-project9.appspot.com",messagingSenderId:"1031272501813",appId:"1:1031272501813:web:a2ca2d3955cbe4cf9a577c",measurementId:"G-1NQ8JF0W90",databaseURL:"https://filmoteka-project9-default-rtdb.europe-west1.firebasedatabase.app/"}),C=(0,v.getAuth)($),W=(0,b.getDatabase)($),T=(0,b.ref)(W),P={btnCloseModal:document.querySelector("[data-signInModal-close]"),btnSignIn:document.querySelector("#signInModalOpen"),btnLogOut:document.querySelector("#logoutBtn"),btnLoginWithPhone:document.querySelector("#LogInWithPhoneBtn"),btnPhoneLogin:document.querySelector("#LogInPhone"),btnGoogleLogin:document.querySelector("#googleLoginBtn"),btnLoginWithEmail:document.querySelector("#loginWithEmailBtn"),btnLoginEmail:document.querySelector("#loginEmailBtn"),btnSignUpWithEmail:document.querySelector("#SignUpWitnEmailBtn"),btnSignUpEmail:document.querySelector("#SignUpBtn"),btnConfirmEmail:document.querySelector("#ConfirmEmail"),backdrop:document.querySelector("[data-signInModal]"),navigation:document.querySelector(".navigation__list"),boxUser:document.querySelector(".user__box"),boxSignInModal:document.querySelector(".signInModal__box"),boxSignInWithEmailModal:document.querySelector(".signInModal__signInWithEmail"),boxSignUpWithEmail:document.querySelector(".signInModal__signUpWithEmail"),boxLogInWithPhone:document.querySelector(".signInModal__LogInWithPhone"),boxRecaptcha:document.querySelector(".recaptcha-container"),loginEmail:document.querySelector("#email"),loginPassword:document.querySelector("#password"),signUpEmail:document.querySelector("#emailSignUp"),signUpPassword:document.querySelector("#passwordSignUp"),loginPhone:document.querySelector("#phone"),loginPhoneCode:document.querySelector("#loginPhoneCode"),modal:document.querySelector("[data-signInModal]"),userName:document.querySelector(".user__name"),formField:document.querySelector(".auth-form__field"),formTitle:document.querySelector(".auth-form__title"),body:document.querySelector("body")};(async()=>{try{(0,v.onAuthStateChanged)(C,(e=>{if(e){switch(!0){case null!==e.displayName&&null!==e.photoURL:P.boxUser.innerHTML=`<img class="user__img" src= ${e.photoURL} alt="" />\n                                  <div class="user__info"><p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name"> ${e.displayName}</p></div>`;break;case null===e.displayName&&null===e.photoURL:P.boxUser.innerHTML=`<p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name">Logged in as ${e.email}</p>`}P.navigation.innerHTML='<li class="navigation__item">\n          <a class="navigation__link " href="./index.html">HOME</a>\n        </li>\n        <li class="navigation__item">\n          <a class="navigation__link navigation__link--current" href="./my-library.html">MY LIBRARY</a>\n        </li>',P.btnSignIn.classList.add("visually-hidden"),P.btnLogOut.classList.remove("visually-hidden"),P.backdrop.classList.add("backdrop--hidden"),P.btnLogOut.addEventListener("click",j),P.btnSignIn.removeEventListener("click",A),P.body.classList.remove("scroll-hidden")}else P.boxUser.innerHTML='<p class="user__name">Hello Stranger</p>',P.navigation.innerHTML="",P.btnSignIn.classList.remove("visually-hidden"),P.btnLogOut.classList.add("visually-hidden"),P.btnLogOut.removeEventListener("click",j),P.btnSignIn.addEventListener("click",A)}))}catch(e){R(e)}})();const A=e=>{event.preventDefault(),P.backdrop.classList.remove("backdrop--hidden"),P.btnGoogleLogin.addEventListener("click",B),P.btnLoginWithEmail.addEventListener("click",H),P.btnSignUpWithEmail.addEventListener("click",G),P.body.classList.add("scroll-hidden"),P.btnCloseModal.addEventListener("click",(()=>{P.backdrop.classList.add("backdrop--hidden"),P.body.classList.remove("scroll-hidden")})),window.addEventListener("keydown",(e=>{"Escape"===e.code&&(P.backdrop.classList.add("backdrop--hidden"),P.body.classList.remove("scroll-hidden"))})),P.backdrop.addEventListener("click",(e=>{event.currentTarget===event.target&&(P.backdrop.classList.add("backdrop--hidden"),P.body.classList.remove("scroll-hidden"))})),P.backdrop.classList.contains("backdrop--hidden")&&(P.btnCloseModal.removeEventListener("click",(()=>{P.backdrop.classList.add("backdrop--hidden"),P.body.classList.remove("scroll-hidden")})),window.removeEventListener("keydown",(e=>{"Escape"===e.code&&(P.backdrop.classList.add("backdrop--hidden"),P.body.classList.remove("scroll-hidden"))})),P.backdrop.removeEventListener("click",(e=>{event.currentTarget===event.target&&(P.backdrop.classList.add("backdrop--hidden"),P.body.classList.remove("scroll-hidden"))})))},j=async()=>{await(0,v.signOut)(C),document.location.href="index.html"},R=e=>{"Firebase: Error (auth/wrong-password)."==e.message&&alert("Wrong password, Try again"),"Firebase: Error (auth/invalid-email)."==e.message?alert("Invalid email, Try again"):alert(`${e.message}`)},G=()=>{P.btnGoogleLogin.removeEventListener("click",B),P.btnLoginWithEmail.removeEventListener("click",H),P.btnLoginEmail.removeEventListener("click",N),P.btnSignUpEmail.addEventListener("click",O),P.boxSignUpWithEmail.classList.remove("visually-hidden"),P.boxSignInModal.classList.add("visually-hidden")},O=async e=>{e.preventDefault();const n=P.signUpEmail.value,t=P.signUpPassword.value;n&&t&&(P.backdrop.classList.add("backdrop--hidden"),P.boxSignUpWithEmail.classList.add("visually-hidden"),P.boxSignInModal.classList.remove("visually-hidden"));try{const e=await(0,v.createUserWithEmailAndPassword)(C,n,t);user=e.user,D(user.uid,user.displayName,user.email,user.photoURL)}catch(e){R(e)}},H=()=>{P.btnGoogleLogin.removeEventListener("click",B),P.btnLoginWithEmail.removeEventListener("click",H),P.btnLoginEmail.addEventListener("click",N),P.boxSignInWithEmailModal.classList.remove("visually-hidden"),P.boxSignInModal.classList.add("visually-hidden")},N=async e=>{e.preventDefault();const n=P.loginEmail.value,t=P.loginPassword.value;n&&t&&(P.backdrop.classList.add("backdrop--hidden"),P.boxSignInWithEmailModal.classList.add("visually-hidden"),P.boxSignInModal.classList.remove("visually-hidden"));try{await(0,v.signInWithEmailAndPassword)(C,n,t)}catch(e){R(e)}},z=new(0,v.GoogleAuthProvider);z.addScope("https://www.googleapis.com/auth/contacts.readonly"),z.setCustomParameters({login_hint:"user@example.com"});const B=e=>{e.preventDefault(),(0,v.signInWithPopup)(C,z).then((e=>{v.GoogleAuthProvider.credentialFromResult(e).accessToken;const n=e.user;(0,b.get)((0,b.child)(T,`users/${n.uid}`)).then((e=>{e.exists()||D(n.uid,n.displayName,n.email,n.photoURL)})).catch((e=>{console.error(e)}))})).catch((e=>{e.code,e.message,e.customData.email,v.GoogleAuthProvider.credentialFromError(e)}))};function D(e,n,t,o){(0,b.set)((0,b.ref)(W,"users/"+e),{username:n,email:t,profile_picture:o})}(0,i.smoothscroll)(),window.addEventListener("scroll",a.hideScrollUpBtn);
//# sourceMappingURL=my-library.acb49757.js.map
