!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=n.parcelRequired76b;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){o[e]=n},n.parcelRequired76b=a);var i=a("kfhZi"),r=a("eI9Bk");a("dTADz");var c=a("eBWoV"),s=a("8J2WX");a("2Alfd"),a("1KXgy"),a("6R4lm"),a("5xtVg");var l=a("bpxeT"),d=a("hKHmD"),u=a("2TvXO"),h=a("fkNhc");a("5xtVg");var m,p=a("gQOBw"),g=a("cokon"),v=(0,h.initializeApp)({apiKey:"AIzaSyCrjIQ-i-DV-fkmDO-FB_HdRZGKiM7ste8",authDomain:"filmoteka-project9.firebaseapp.com",projectId:"filmoteka-project9",storageBucket:"filmoteka-project9.appspot.com",messagingSenderId:"1031272501813",appId:"1:1031272501813:web:a2ca2d3955cbe4cf9a577c",measurementId:"G-1NQ8JF0W90",databaseURL:"https://filmoteka-project9-default-rtdb.europe-west1.firebasedatabase.app/"}),f=(0,p.getAuth)(v),b=(0,g.getDatabase)(v),L=(0,g.ref)(b),y={btnCloseModal:document.querySelector("[data-signInModal-close]"),btnSignIn:document.querySelector("#signInModalOpen"),btnLogOut:document.querySelector("#logoutBtn"),btnLoginWithPhone:document.querySelector("#LogInWithPhoneBtn"),btnPhoneLogin:document.querySelector("#LogInPhone"),btnGoogleLogin:document.querySelector("#googleLoginBtn"),btnLoginWithEmail:document.querySelector("#loginWithEmailBtn"),btnLoginEmail:document.querySelector("#loginEmailBtn"),btnSignUpWithEmail:document.querySelector("#SignUpWitnEmailBtn"),btnSignUpEmail:document.querySelector("#SignUpBtn"),btnConfirmEmail:document.querySelector("#ConfirmEmail"),backdrop:document.querySelector("[data-signInModal]"),navigation:document.querySelector(".navigation__list"),boxUser:document.querySelector(".user__box"),boxSignInModal:document.querySelector(".signInModal__box"),boxSignInWithEmailModal:document.querySelector(".signInModal__signInWithEmail"),boxSignUpWithEmail:document.querySelector(".signInModal__signUpWithEmail"),boxLogInWithPhone:document.querySelector(".signInModal__LogInWithPhone"),boxRecaptcha:document.querySelector(".recaptcha-container"),loginEmail:document.querySelector("#email"),loginPassword:document.querySelector("#password"),signUpEmail:document.querySelector("#emailSignUp"),signUpPassword:document.querySelector("#passwordSignUp"),loginPhone:document.querySelector("#phone"),loginPhoneCode:document.querySelector("#loginPhoneCode"),modal:document.querySelector("[data-signInModal]"),userName:document.querySelector(".user__name"),formField:document.querySelector(".auth-form__field"),formTitle:document.querySelector(".auth-form__title"),body:document.querySelector("body")},k=(m=e(l)(e(u).mark((function n(){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,p.onAuthStateChanged)(f,(function(e){if(e){switch(!0){case null!==e.displayName&&null!==e.photoURL:y.boxUser.innerHTML='<img class="user__img" src= '.concat(e.photoURL,' alt="" />\n                                  <div class="user__info"><p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name"> ').concat(e.displayName,"</p></div>");break;case null===e.displayName&&null===e.photoURL:y.boxUser.innerHTML='<p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name">Logged in as '.concat(e.email,"</p>")}y.navigation.innerHTML='<li class="navigation__item">\n          <a class="navigation__link " href="./index.html">HOME</a>\n        </li>\n        <li class="navigation__item">\n          <a class="navigation__link navigation__link--current" href="./my-library.html">MY LIBRARY</a>\n        </li>',y.btnSignIn.classList.add("visually-hidden"),y.btnLogOut.classList.remove("visually-hidden"),y.backdrop.classList.add("backdrop--hidden"),y.btnLogOut.addEventListener("click",E),y.btnSignIn.removeEventListener("click",S),y.body.classList.remove("scroll-hidden")}else y.boxUser.innerHTML='<p class="user__name">Hello Stranger</p>',y.navigation.innerHTML="",y.btnSignIn.classList.remove("visually-hidden"),y.btnLogOut.classList.add("visually-hidden"),y.btnLogOut.removeEventListener("click",E),y.btnSignIn.addEventListener("click",S)}))}catch(e){w(e)}case 1:case"end":return e.stop()}}),n)}))),function(){return m.apply(this,arguments)});k();var S=function(e){event.preventDefault(),y.backdrop.classList.remove("backdrop--hidden"),y.btnGoogleLogin.addEventListener("click",U),y.btnLoginWithEmail.addEventListener("click",I),y.btnSignUpWithEmail.addEventListener("click",_),y.body.classList.add("scroll-hidden"),y.btnCloseModal.addEventListener("click",(function(){y.backdrop.classList.add("backdrop--hidden"),y.body.classList.remove("scroll-hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(y.backdrop.classList.add("backdrop--hidden"),y.body.classList.remove("scroll-hidden"))})),y.backdrop.addEventListener("click",(function(e){event.currentTarget===event.target&&(y.backdrop.classList.add("backdrop--hidden"),y.body.classList.remove("scroll-hidden"))})),y.backdrop.classList.contains("backdrop--hidden")&&(y.btnCloseModal.removeEventListener("click",(function(){y.backdrop.classList.add("backdrop--hidden"),y.body.classList.remove("scroll-hidden")})),window.removeEventListener("keydown",(function(e){"Escape"===e.code&&(y.backdrop.classList.add("backdrop--hidden"),y.body.classList.remove("scroll-hidden"))})),y.backdrop.removeEventListener("click",(function(e){event.currentTarget===event.target&&(y.backdrop.classList.add("backdrop--hidden"),y.body.classList.remove("scroll-hidden"))})))},E=function(){var n=e(l)(e(u).mark((function n(){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.signOut)(f);case 2:document.location.href="index.html";case 3:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),w=function(e){"Firebase: Error (auth/wrong-password)."==e.message&&alert("Wrong password, Try again"),"Firebase: Error (auth/invalid-email)."==e.message?alert("Invalid email, Try again"):alert("".concat(e.message))},_=function(){y.btnGoogleLogin.removeEventListener("click",U),y.btnLoginWithEmail.removeEventListener("click",I),y.btnLoginEmail.removeEventListener("click",q),y.btnSignUpEmail.addEventListener("click",x),y.boxSignUpWithEmail.classList.remove("visually-hidden"),y.boxSignInModal.classList.add("visually-hidden")},x=function(){var n=e(l)(e(u).mark((function n(t){var o,a,i;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=y.signUpEmail.value,a=y.signUpPassword.value,o&&a&&(y.backdrop.classList.add("backdrop--hidden"),y.boxSignUpWithEmail.classList.add("visually-hidden"),y.boxSignInModal.classList.remove("visually-hidden")),e.prev=4,e.next=7,(0,p.createUserWithEmailAndPassword)(f,o,a);case 7:i=e.sent,user=i.user,W(user.uid,user.displayName,user.email,user.photoURL),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),w(e.t0);case 15:case"end":return e.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}(),I=function(){y.btnGoogleLogin.removeEventListener("click",U),y.btnLoginWithEmail.removeEventListener("click",I),y.btnLoginEmail.addEventListener("click",q),y.boxSignInWithEmailModal.classList.remove("visually-hidden"),y.boxSignInModal.classList.add("visually-hidden")},q=function(){var n=e(l)(e(u).mark((function n(t){var o,a;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=y.loginEmail.value,a=y.loginPassword.value,o&&a&&(y.backdrop.classList.add("backdrop--hidden"),y.boxSignInWithEmailModal.classList.add("visually-hidden"),y.boxSignInModal.classList.remove("visually-hidden")),e.prev=4,e.next=7,(0,p.signInWithEmailAndPassword)(f,o,a);case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),w(e.t0);case 13:case"end":return e.stop()}}),n,null,[[4,10]])})));return function(e){return n.apply(this,arguments)}}(),M=new(0,p.GoogleAuthProvider);M.addScope("https://www.googleapis.com/auth/contacts.readonly"),M.setCustomParameters({login_hint:"user@example.com"});var U=function(e){e.preventDefault(),(0,p.signInWithPopup)(f,M).then((function(e){p.GoogleAuthProvider.credentialFromResult(e).accessToken;var n=e.user;(0,g.get)((0,g.child)(L,"users/".concat(n.uid))).then((function(e){e.exists()||W(n.uid,n.displayName,n.email,n.photoURL)})).catch((function(e){console.error(e)}))})).catch((function(e){e.code,e.message,e.customData.email,p.GoogleAuthProvider.credentialFromError(e)}))};function W(e,n,t,o){(0,g.set)((0,g.ref)(b,"users/"+e),{username:n,email:t,profile_picture:o})}!function(){var n=e(l)(e(u).mark((function n(t){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,p.onAuthStateChanged)(f,(function(e){e?P(e.uid,t):console.log("no user")}))}catch(e){w(e)}case 1:case"end":return e.stop()}}),n)})))}();function P(n,t){(0,g.get)((0,g.child)(L,"users/".concat(n,"/watched"))).then((function(o){if(o.exists()){var a=Array.from(o.val()).length,i=e(d)({},a,t);(0,g.update)((0,g.child)(L,"users/".concat(n,"/watched")),i)}else{var r={watched:{0:t}};(0,g.update)((0,g.child)(L,"users/".concat(n)),r)}})).catch((function(e){console.error(e)}))}!function(){var n=e(l)(e(u).mark((function n(t){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,p.onAuthStateChanged)(f,(function(e){e?A(e.uid,t):console.log("no user")}))}catch(e){w(e)}case 1:case"end":return e.stop()}}),n)})))}();function A(e,n){(0,g.get)((0,g.child)(L,"users/".concat(e,"/watched"))).then((function(t){if(t.exists()){var o=Object.values(t.val()).filter((function(e){return e!==n})),a={watched:Object.assign({},o)};(0,g.update)((0,g.child)(L,"users/".concat(e)),a)}})).catch((function(e){console.error(e)}))}!function(){var n=e(l)(e(u).mark((function n(t){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,p.onAuthStateChanged)(f,(function(e){e?B(e.uid,t):console.log("no user")}))}catch(e){w(e)}case 1:case"end":return e.stop()}}),n)})))}();function B(n,t){(0,g.get)((0,g.child)(L,"users/".concat(n,"/queue"))).then((function(o){if(o.exists()){var a=Array.from(o.val()).length,i=e(d)({},a,t);(0,g.update)((0,g.child)(L,"users/".concat(n,"/queue")),i)}else{var r={queue:{0:t}};(0,g.update)((0,g.child)(L,"users/".concat(n)),r)}})).catch((function(e){console.error(e)}))}!function(){var n=e(l)(e(u).mark((function n(t){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,p.onAuthStateChanged)(f,(function(e){e?O(e.uid,t):console.log("no user")}))}catch(e){w(e)}case 1:case"end":return e.stop()}}),n)})))}();function O(e,n){(0,g.get)((0,g.child)(L,"users/".concat(e,"/queue"))).then((function(t){if(t.exists()){var o=Object.values(t.val()).filter((function(e){return e!==n})),a={queue:Object.assign({},o)};(0,g.update)((0,g.child)(L,"users/".concat(e)),a)}})).catch((function(e){console.error(e)}))}(0,r.smoothscroll)(),window.addEventListener("scroll",i.hideScrollUpBtn);var T=document.querySelector(".header_btn-queue"),C=document.querySelector(".header_btn-watched");C.classList.contains("current-btn")&&(0,c.fetchMovieByIdFromStorageWatched)(),T.classList.contains("current-btn")&&(0,s.fetchMovieByIdFromStorageQueue)(),T.addEventListener("click",(function(){C.classList.remove("current-btn"),T.classList.add("current-btn"),(0,s.fetchMovieByIdFromStorageQueue)()})),C.addEventListener("click",(function(){T.classList.remove("current-btn"),C.classList.add("current-btn"),(0,c.fetchMovieByIdFromStorageWatched)()}))}();
//# sourceMappingURL=my-library.1e60d764.js.map
