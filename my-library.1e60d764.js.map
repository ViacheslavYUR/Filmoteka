{"mappings":"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","sources":["src/my-library.js","src/js/firebase-library.js"],"sourcesContent":["import { hideScrollUpBtn } from './js/hide-scroll-up-button';\nimport { smoothscroll } from './js/smoothscroll';\nimport { hiddenElementsOnMobileVersion } from './js/hideElementsInMobileVersion';\nimport { fetchMovieByIdFromStorageWatched } from './js/fromStorage/fetchWatchedFromStorage';\nimport { fetchMovieByIdFromStorageQueue } from './js/fromStorage/fetchMovieByIdFromStorageQueue';\n\nimport './js/modalTeam/renderTeam';\nimport './js/modalTeam/teamModal';\nimport './js/vanilla';\nimport './js/modal';\nimport './js/firebase-library';\n\nsmoothscroll();\nwindow.addEventListener('scroll', hideScrollUpBtn);\n\nconst btnQueue = document.querySelector('.header_btn-queue');\nconst btnWatched = document.querySelector('.header_btn-watched');\n\nif (btnWatched.classList.contains('current-btn')) {\n  fetchMovieByIdFromStorageWatched();\n}\n\nif (btnQueue.classList.contains('current-btn')) {\n  fetchMovieByIdFromStorageQueue();\n}\n\nbtnQueue.addEventListener('click', () => {\n  btnWatched.classList.remove('current-btn');\n  btnQueue.classList.add('current-btn');\n  fetchMovieByIdFromStorageQueue();\n});\n\nbtnWatched.addEventListener('click', () => {\n  btnQueue.classList.remove('current-btn');\n  btnWatched.classList.add('current-btn');\n  fetchMovieByIdFromStorageWatched();\n});\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from 'firebase/app';\n\nimport { onBackdropClick, onEscKeyPress } from './modal';\n\nimport {\n  getAuth,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  signInWithPopup,\n  GoogleAuthProvider,\n  sendEmailVerification,\n  // signInWithRedirect,\n  RecaptchaVerifier,\n  signInWithPhoneNumber,\n  // connectAuthEmulator,\n} from 'firebase/auth';\n\nimport {\n  getDatabase,\n  ref,\n  set,\n  onValue,\n  child,\n  get,\n  push,\n  update,\n} from 'firebase/database';\n\n// Initialize Firebase\nconst firebaseApp = initializeApp({\n  apiKey: 'AIzaSyCrjIQ-i-DV-fkmDO-FB_HdRZGKiM7ste8',\n  authDomain: 'filmoteka-project9.firebaseapp.com',\n  projectId: 'filmoteka-project9',\n  storageBucket: 'filmoteka-project9.appspot.com',\n  messagingSenderId: '1031272501813',\n  appId: '1:1031272501813:web:a2ca2d3955cbe4cf9a577c',\n  measurementId: 'G-1NQ8JF0W90',\n  databaseURL:\n    'https://filmoteka-project9-default-rtdb.europe-west1.firebasedatabase.app/',\n});\n\nexport const auth = getAuth(firebaseApp);\n\n// Initialize Realtime Database and get a reference to the service\nconst db = getDatabase(firebaseApp);\n\nexport const dbRef = ref(db);\n\n// ================= запуск локального эмулятора =================\n\n//из это папки >>> C:\\Filmoteka\n//запуск хоcтинга >>> firebase serve --only hosting\n//запуск эмулятора >>> firebase emulators:start --only auth\n\n// connectAuthEmulator(auth, 'http://localhost:9099/');\n\n// ============================================================================\n\nconst refs = {\n  btnCloseModal: document.querySelector('[data-signInModal-close]'),\n  btnSignIn: document.querySelector('#signInModalOpen'),\n  btnLogOut: document.querySelector('#logoutBtn'),\n  btnLoginWithPhone: document.querySelector('#LogInWithPhoneBtn'),\n  btnPhoneLogin: document.querySelector('#LogInPhone'),\n  btnGoogleLogin: document.querySelector('#googleLoginBtn'),\n  btnLoginWithEmail: document.querySelector('#loginWithEmailBtn'),\n  btnLoginEmail: document.querySelector('#loginEmailBtn'),\n  btnSignUpWithEmail: document.querySelector('#SignUpWitnEmailBtn'),\n  btnSignUpEmail: document.querySelector('#SignUpBtn'),\n  btnConfirmEmail: document.querySelector('#ConfirmEmail'),\n\n  backdrop: document.querySelector('[data-signInModal]'),\n  navigation: document.querySelector('.navigation__list'),\n  boxUser: document.querySelector('.user__box'),\n  boxSignInModal: document.querySelector('.signInModal__box'),\n  boxSignInWithEmailModal: document.querySelector(\n    '.signInModal__signInWithEmail'\n  ),\n  boxSignUpWithEmail: document.querySelector('.signInModal__signUpWithEmail'),\n  boxLogInWithPhone: document.querySelector('.signInModal__LogInWithPhone'),\n  boxRecaptcha: document.querySelector('.recaptcha-container'),\n\n  loginEmail: document.querySelector('#email'),\n  loginPassword: document.querySelector('#password'),\n  signUpEmail: document.querySelector('#emailSignUp'),\n  signUpPassword: document.querySelector('#passwordSignUp'),\n  loginPhone: document.querySelector('#phone'),\n  loginPhoneCode: document.querySelector('#loginPhoneCode'),\n  modal: document.querySelector('[data-signInModal]'),\n  userName: document.querySelector('.user__name'),\n  formField: document.querySelector('.auth-form__field'),\n  formTitle: document.querySelector('.auth-form__title'),\n  body: document.querySelector('body'),\n};\n\n// close Modal Func auth =====================================================================================\n\nconst closeModalFunc = () => {\n  refs.btnCloseModal.addEventListener('click', () => {\n    refs.backdrop.classList.add('backdrop--hidden');\n    refs.body.classList.remove('scroll-hidden');\n  });\n\n  window.addEventListener('keydown', e => {\n    const ESC_KEY_CODE = 'Escape';\n    const isEscKey = e.code === ESC_KEY_CODE;\n    if (isEscKey) {\n      refs.backdrop.classList.add('backdrop--hidden');\n      refs.body.classList.remove('scroll-hidden');\n    }\n  });\n\n  refs.backdrop.addEventListener('click', e => {\n    if (event.currentTarget === event.target) {\n      refs.backdrop.classList.add('backdrop--hidden');\n      refs.body.classList.remove('scroll-hidden');\n    }\n  });\n\n  if (refs.backdrop.classList.contains('backdrop--hidden')) {\n    refs.btnCloseModal.removeEventListener('click', () => {\n      refs.backdrop.classList.add('backdrop--hidden');\n      refs.body.classList.remove('scroll-hidden');\n    });\n\n    window.removeEventListener('keydown', e => {\n      const ESC_KEY_CODE = 'Escape';\n      const isEscKey = e.code === ESC_KEY_CODE;\n      if (isEscKey) {\n        refs.backdrop.classList.add('backdrop--hidden');\n        refs.body.classList.remove('scroll-hidden');\n      }\n    });\n\n    refs.backdrop.removeEventListener('click', e => {\n      if (event.currentTarget === event.target) {\n        refs.backdrop.classList.add('backdrop--hidden');\n        refs.body.classList.remove('scroll-hidden');\n      }\n    });\n  }\n};\n\n// monitor Auth State =====================================================================================\n\nconst monitorAuthState = async () => {\n  try {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        // console.log(user);\n\n        switch (true) {\n          case user.displayName !== null && user.photoURL !== null:\n            refs.boxUser.innerHTML = `<img class=\"user__img\" src= ${user.photoURL} alt=\"\" />\n                                  <div class=\"user__info\"><p class=\"user__greeting\">Good to see You again</p>\n                                  <p class=\"user__name\"> ${user.displayName}</p></div>`;\n            break;\n\n          case user.displayName === null && user.photoURL === null:\n            refs.boxUser.innerHTML = `<p class=\"user__greeting\">Good to see You again</p>\n                                  <p class=\"user__name\">Logged in as ${user.email}</p>`;\n            break;\n\n          default:\n            break;\n        }\n        refs.navigation.innerHTML = `<li class=\"navigation__item\">\n          <a class=\"navigation__link \" href=\"./index.html\">HOME</a>\n        </li>\n        <li class=\"navigation__item\">\n          <a class=\"navigation__link navigation__link--current\" href=\"./my-library.html\">MY LIBRARY</a>\n        </li>`;\n\n        refs.btnSignIn.classList.add('visually-hidden');\n        refs.btnLogOut.classList.remove('visually-hidden');\n        refs.backdrop.classList.add('backdrop--hidden');\n        refs.btnLogOut.addEventListener('click', logOut);\n        refs.btnSignIn.removeEventListener('click', onbtnSignInClick);\n        refs.body.classList.remove('scroll-hidden');\n      } else {\n        refs.boxUser.innerHTML = `<p class=\"user__name\">Hello Stranger</p>`;\n        refs.navigation.innerHTML = ``;\n        refs.btnSignIn.classList.remove('visually-hidden');\n        refs.btnLogOut.classList.add('visually-hidden');\n        refs.btnLogOut.removeEventListener('click', logOut);\n        refs.btnSignIn.addEventListener('click', onbtnSignInClick);\n      }\n    });\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\nmonitorAuthState();\n\n// on btn SignIn Click =====================================================================================\n\nconst onbtnSignInClick = e => {\n  event.preventDefault();\n  refs.backdrop.classList.remove('backdrop--hidden');\n  refs.btnGoogleLogin.addEventListener('click', onBtnGoogleLoginClick);\n  refs.btnLoginWithEmail.addEventListener('click', onbtnLoginWithEmailClick);\n  refs.btnSignUpWithEmail.addEventListener('click', onBtnSignUpWithEmailClick);\n  refs.body.classList.add('scroll-hidden');\n  closeModalFunc();\n};\n\nconst logOut = async () => {\n  await signOut(auth);\n  document.location.href = 'index.html';\n};\n\n// show Login Error =====================================================================================\n\nconst showLoginError = error => {\n  if (error.message == 'Firebase: Error (auth/wrong-password).') {\n    alert('Wrong password, Try again');\n  }\n  if (error.message == 'Firebase: Error (auth/invalid-email).') {\n    alert(`Invalid email, Try again`);\n  } else {\n    alert(`${error.message}`);\n  }\n};\n\n// create Account  =====================================================================================\n\nconst onBtnSignUpWithEmailClick = () => {\n  refs.btnGoogleLogin.removeEventListener('click', onBtnGoogleLoginClick);\n  refs.btnLoginWithEmail.removeEventListener('click', onbtnLoginWithEmailClick);\n  refs.btnLoginEmail.removeEventListener('click', loginEmailPasspord);\n  refs.btnSignUpEmail.addEventListener('click', createAccount);\n  refs.boxSignUpWithEmail.classList.remove('visually-hidden');\n  refs.boxSignInModal.classList.add('visually-hidden');\n};\n\nconst createAccount = async e => {\n  e.preventDefault();\n  const email = refs.signUpEmail.value;\n  const password = refs.signUpPassword.value;\n\n  if (email && password) {\n    refs.backdrop.classList.add('backdrop--hidden');\n    refs.boxSignUpWithEmail.classList.add('visually-hidden');\n    refs.boxSignInModal.classList.remove('visually-hidden');\n  }\n\n  try {\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n\n    user = userCredential.user;\n\n    writeUserData(user.uid, user.displayName, user.email, user.photoURL);\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\n// sign In With Email And Password auth =====================================================================================\n\nconst onbtnLoginWithEmailClick = () => {\n  refs.btnGoogleLogin.removeEventListener('click', onBtnGoogleLoginClick);\n  refs.btnLoginWithEmail.removeEventListener('click', onbtnLoginWithEmailClick);\n  refs.btnLoginEmail.addEventListener('click', loginEmailPasspord);\n  refs.boxSignInWithEmailModal.classList.remove('visually-hidden');\n  refs.boxSignInModal.classList.add('visually-hidden');\n};\n\nconst loginEmailPasspord = async e => {\n  e.preventDefault();\n  const email = refs.loginEmail.value;\n  const password = refs.loginPassword.value;\n\n  if (email && password) {\n    refs.backdrop.classList.add('backdrop--hidden');\n    refs.boxSignInWithEmailModal.classList.add('visually-hidden');\n    refs.boxSignInModal.classList.remove('visually-hidden');\n  }\n\n  try {\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      email,\n      password\n    );\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\n// google auth =====================================================================================\n\nconst provider = new GoogleAuthProvider();\n\nprovider.addScope('https://www.googleapis.com/auth/contacts.readonly');\n\nprovider.setCustomParameters({\n  login_hint: 'user@example.com',\n});\n\nexport const onBtnGoogleLoginClick = e => {\n  e.preventDefault();\n  signInWithPopup(auth, provider)\n    .then(result => {\n      // This gives you a Google Access Token. You can use it to access the Google API.\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential.accessToken;\n      // The signed-in user info.\n      const user = result.user;\n      // ...\n\n      get(child(dbRef, `users/${user.uid}`))\n        .then(snapshot => {\n          if (snapshot.exists()) {\n            // console.log(snapshot.val());\n          } else {\n            writeUserData(\n              user.uid,\n              user.displayName,\n              user.email,\n              user.photoURL\n            );\n          }\n        })\n        .catch(error => {\n          console.error(error);\n        });\n    })\n    .catch(error => {\n      // Handle Errors here.\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      // The email of the user's account used.\n      const email = error.customData.email;\n      // The AuthCredential type that was used.\n      const credential = GoogleAuthProvider.credentialFromError(error);\n      // ...\n    });\n};\n\n// data base =================================================================================\n\n// add User in DB ============================================================================\n\nfunction writeUserData(userId, name, email, imageUrl) {\n  set(ref(db, 'users/' + userId), {\n    username: name,\n    email: email,\n    profile_picture: imageUrl,\n  });\n}\n\n// add to watched ============================================================================\n\nexport const onAddToWatchedBtnClick = async filmId => {\n  try {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        AddToWatched(user.uid, filmId);\n      } else {\n        console.log('no user');\n      }\n    });\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\nfunction AddToWatched(uid, filmId) {\n  get(child(dbRef, `users/${uid}/watched`))\n    .then(snapshot => {\n      if (snapshot.exists()) {\n        const amount = Array.from(snapshot.val()).length;\n        const postData = { [amount]: filmId };\n        update(child(dbRef, `users/${uid}/watched`), postData);\n      } else {\n        const postData = { watched: { 0: filmId } };\n        update(child(dbRef, `users/${uid}`), postData);\n      }\n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n\n// remove from watched ============================================================================\n\nexport const onRemoveFromWatchedBtnClick = async filmId => {\n  try {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        removeFromWatched(user.uid, filmId);\n      } else {\n        console.log('no user');\n      }\n    });\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\nfunction removeFromWatched(uid, filmId) {\n  get(child(dbRef, `users/${uid}/watched`))\n    .then(snapshot => {\n      if (snapshot.exists()) {\n        const Data = Object.values(snapshot.val()).filter(\n          item => item !== filmId\n        );\n        let postData = { watched: Object.assign({}, Data) };\n        update(child(dbRef, `users/${uid}`), postData);\n      } else {\n        // const postData = { watched: { [filmId]: filmName } };\n        // update(child(dbRef, `users/${uid}`), postData);\n      }\n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n\n// add to queue ============================================================================\n\nexport const onAddToQueueBtnClick = async filmId => {\n  try {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        addToQueue(user.uid, filmId);\n      } else {\n        console.log('no user');\n      }\n    });\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\nfunction addToQueue(uid, filmId) {\n  get(child(dbRef, `users/${uid}/queue`))\n    .then(snapshot => {\n      if (snapshot.exists()) {\n        const amount = Array.from(snapshot.val()).length;\n        const postData = { [amount]: filmId };\n        update(child(dbRef, `users/${uid}/queue`), postData);\n      } else {\n        const postData = { queue: { 0: filmId } };\n        update(child(dbRef, `users/${uid}`), postData);\n      }\n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n\n// remove from queue ============================================================================\n\nexport const onRemoveFromQueueBtnClick = async filmId => {\n  try {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        removeFromQueue(user.uid, filmId);\n      } else {\n        console.log('no user');\n      }\n    });\n  } catch (error) {\n    showLoginError(error);\n  }\n};\n\nfunction removeFromQueue(uid, filmId) {\n  get(child(dbRef, `users/${uid}/queue`))\n    .then(snapshot => {\n      if (snapshot.exists()) {\n        const Data = Object.values(snapshot.val()).filter(\n          item => item !== filmId\n        );\n\n        let postData = { queue: Object.assign({}, Data) };\n\n        update(child(dbRef, `users/${uid}`), postData);\n      }\n    })\n    .catch(error => {\n      console.error(error);\n    });\n}\n"],"names":["$kfhZi","parcelRequire","$bpxeT","$9c0fa9e3add06179$var$firebaseApp","$fkNhc","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","$9c0fa9e3add06179$export$73693bad9f5880b0","$gQOBw","getAuth","$9c0fa9e3add06179$var$db","$cokon","getDatabase","$9c0fa9e3add06179$export$80a8f1833d408a38","ref","$9c0fa9e3add06179$var$refs","btnCloseModal","document","querySelector","btnSignIn","btnLogOut","btnLoginWithPhone","btnPhoneLogin","btnGoogleLogin","btnLoginWithEmail","btnLoginEmail","btnSignUpWithEmail","btnSignUpEmail","btnConfirmEmail","backdrop","navigation","boxUser","boxSignInModal","boxSignInWithEmailModal","boxSignUpWithEmail","boxLogInWithPhone","boxRecaptcha","loginEmail","loginPassword","signUpEmail","signUpPassword","loginPhone","loginPhoneCode","modal","userName","formField","formTitle","body","$9c0fa9e3add06179$var$monitorAuthState","$parcel$interopDefault","$2TvXO","mark","_callee","onAuthStateChanged","user","displayName","photoURL","innerHTML","concat","email","classList","add","remove","addEventListener","$9c0fa9e3add06179$var$logOut","removeEventListener","$9c0fa9e3add06179$var$onbtnSignInClick","error","$9c0fa9e3add06179$var$showLoginError","e","event","preventDefault","$9c0fa9e3add06179$export$ab7b7ebee37be904","$9c0fa9e3add06179$var$onbtnLoginWithEmailClick","$9c0fa9e3add06179$var$onBtnSignUpWithEmailClick","window","code","currentTarget","target","contains","signOut","location","href","message","alert","$9c0fa9e3add06179$var$loginEmailPasspord","$9c0fa9e3add06179$var$createAccount","password","userCredential","value","createUserWithEmailAndPassword","_ctx","sent","$9c0fa9e3add06179$var$writeUserData","uid","t0","signInWithEmailAndPassword","$9c0fa9e3add06179$var$provider","GoogleAuthProvider","addScope","setCustomParameters","login_hint","signInWithPopup","then","result","credentialFromResult","accessToken","get","child","snapshot","exists","catch","console","customData","credentialFromError","userId","name","imageUrl","set","username","profile_picture","filmId","$9c0fa9e3add06179$var$AddToWatched","log","amount","Array","from","val","length","postData","$hKHmD","update","postData1","watched","$9c0fa9e3add06179$var$removeFromWatched","Data","Object","values","filter","item","assign","$9c0fa9e3add06179$var$addToQueue","postData2","queue","$9c0fa9e3add06179$var$removeFromQueue","$eI9Bk","smoothscroll","hideScrollUpBtn","$865c390aa2d1ad34$var$btnQueue","$865c390aa2d1ad34$var$btnWatched","$eBWoV","fetchMovieByIdFromStorageWatched","$8J2WX","fetchMovieByIdFromStorageQueue"],"version":3,"file":"my-library.1e60d764.js.map"}