var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},o=e.parcelRequired76b;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in t){var o=t[e];delete t[e];var i={id:e,exports:{}};return n[e]=i,o.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){t[e]=n},e.parcelRequired76b=o);var i=o("i6cgS"),a=o("9vy3o");o("gv2Yj");var r=o("6KYEq"),s=o("cRO1V");o("2mMJL"),o("1oNJL"),o("iVS7T"),o("bTcpz");var l=o("gKkQl");o("bTcpz");var d=o("eyjy7"),c=o("jAzyG");const u=(0,l.initializeApp)({apiKey:"AIzaSyCrjIQ-i-DV-fkmDO-FB_HdRZGKiM7ste8",authDomain:"filmoteka-project9.firebaseapp.com",projectId:"filmoteka-project9",storageBucket:"filmoteka-project9.appspot.com",messagingSenderId:"1031272501813",appId:"1:1031272501813:web:a2ca2d3955cbe4cf9a577c",measurementId:"G-1NQ8JF0W90",databaseURL:"https://filmoteka-project9-default-rtdb.europe-west1.firebasedatabase.app/"}),m=(0,d.getAuth)(u),g=(0,c.getDatabase)(u),p=(0,c.ref)(g),h={btnCloseModal:document.querySelector("[data-signInModal-close]"),btnSignIn:document.querySelector("#signInModalOpen"),btnLogOut:document.querySelector("#logoutBtn"),btnLoginWithPhone:document.querySelector("#LogInWithPhoneBtn"),btnPhoneLogin:document.querySelector("#LogInPhone"),btnGoogleLogin:document.querySelector("#googleLoginBtn"),btnLoginWithEmail:document.querySelector("#loginWithEmailBtn"),btnLoginEmail:document.querySelector("#loginEmailBtn"),btnSignUpWithEmail:document.querySelector("#SignUpWitnEmailBtn"),btnSignUpEmail:document.querySelector("#SignUpBtn"),btnConfirmEmail:document.querySelector("#ConfirmEmail"),backdrop:document.querySelector("[data-signInModal]"),navigation:document.querySelector(".navigation__list"),boxUser:document.querySelector(".user__box"),boxSignInModal:document.querySelector(".signInModal__box"),boxSignInWithEmailModal:document.querySelector(".signInModal__signInWithEmail"),boxSignUpWithEmail:document.querySelector(".signInModal__signUpWithEmail"),boxLogInWithPhone:document.querySelector(".signInModal__LogInWithPhone"),boxRecaptcha:document.querySelector(".recaptcha-container"),loginEmail:document.querySelector("#email"),loginPassword:document.querySelector("#password"),signUpEmail:document.querySelector("#emailSignUp"),signUpPassword:document.querySelector("#passwordSignUp"),loginPhone:document.querySelector("#phone"),loginPhoneCode:document.querySelector("#loginPhoneCode"),modal:document.querySelector("[data-signInModal]"),userName:document.querySelector(".user__name"),formField:document.querySelector(".auth-form__field"),formTitle:document.querySelector(".auth-form__title"),body:document.querySelector("body")};(async()=>{try{(0,d.onAuthStateChanged)(m,(e=>{if(e){switch(!0){case null!==e.displayName&&null!==e.photoURL:h.boxUser.innerHTML=`<img class="user__img" src= ${e.photoURL} alt="" />\n                                  <div class="user__info"><p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name"> ${e.displayName}</p></div>`;break;case null===e.displayName&&null===e.photoURL:h.boxUser.innerHTML=`<p class="user__greeting">Good to see You again</p>\n                                  <p class="user__name">Logged in as ${e.email}</p>`}h.navigation.innerHTML='<li class="navigation__item">\n          <a class="navigation__link " href="./index.html">HOME</a>\n        </li>\n        <li class="navigation__item">\n          <a class="navigation__link navigation__link--current" href="./my-library.html">MY LIBRARY</a>\n        </li>',h.btnSignIn.classList.add("visually-hidden"),h.btnLogOut.classList.remove("visually-hidden"),h.backdrop.classList.add("backdrop--hidden"),h.btnLogOut.addEventListener("click",v),h.btnSignIn.removeEventListener("click",b),h.body.classList.remove("scroll-hidden")}else h.boxUser.innerHTML='<p class="user__name">Hello Stranger</p>',h.navigation.innerHTML="",h.btnSignIn.classList.remove("visually-hidden"),h.btnLogOut.classList.add("visually-hidden"),h.btnLogOut.removeEventListener("click",v),h.btnSignIn.addEventListener("click",b)}))}catch(e){L(e)}})();const b=e=>{event.preventDefault(),h.backdrop.classList.remove("backdrop--hidden"),h.btnGoogleLogin.addEventListener("click",f),h.btnLoginWithEmail.addEventListener("click",E),h.btnSignUpWithEmail.addEventListener("click",y),h.body.classList.add("scroll-hidden"),h.btnCloseModal.addEventListener("click",(()=>{h.backdrop.classList.add("backdrop--hidden"),h.body.classList.remove("scroll-hidden")})),window.addEventListener("keydown",(e=>{"Escape"===e.code&&(h.backdrop.classList.add("backdrop--hidden"),h.body.classList.remove("scroll-hidden"))})),h.backdrop.addEventListener("click",(e=>{event.currentTarget===event.target&&(h.backdrop.classList.add("backdrop--hidden"),h.body.classList.remove("scroll-hidden"))})),h.backdrop.classList.contains("backdrop--hidden")&&(h.btnCloseModal.removeEventListener("click",(()=>{h.backdrop.classList.add("backdrop--hidden"),h.body.classList.remove("scroll-hidden")})),window.removeEventListener("keydown",(e=>{"Escape"===e.code&&(h.backdrop.classList.add("backdrop--hidden"),h.body.classList.remove("scroll-hidden"))})),h.backdrop.removeEventListener("click",(e=>{event.currentTarget===event.target&&(h.backdrop.classList.add("backdrop--hidden"),h.body.classList.remove("scroll-hidden"))})))},v=async()=>{await(0,d.signOut)(m),document.location.href="index.html"},L=e=>{"Firebase: Error (auth/wrong-password)."==e.message&&alert("Wrong password, Try again"),"Firebase: Error (auth/invalid-email)."==e.message?alert("Invalid email, Try again"):alert(`${e.message}`)},y=()=>{h.btnGoogleLogin.removeEventListener("click",f),h.btnLoginWithEmail.removeEventListener("click",E),h.btnLoginEmail.removeEventListener("click",k),h.btnSignUpEmail.addEventListener("click",S),h.boxSignUpWithEmail.classList.remove("visually-hidden"),h.boxSignInModal.classList.add("visually-hidden")},S=async e=>{e.preventDefault();const n=h.signUpEmail.value,t=h.signUpPassword.value;n&&t&&(h.backdrop.classList.add("backdrop--hidden"),h.boxSignUpWithEmail.classList.add("visually-hidden"),h.boxSignInModal.classList.remove("visually-hidden"));try{const e=await(0,d.createUserWithEmailAndPassword)(m,n,t);user=e.user,I(user.uid,user.displayName,user.email,user.photoURL)}catch(e){L(e)}},E=()=>{h.btnGoogleLogin.removeEventListener("click",f),h.btnLoginWithEmail.removeEventListener("click",E),h.btnLoginEmail.addEventListener("click",k),h.boxSignInWithEmailModal.classList.remove("visually-hidden"),h.boxSignInModal.classList.add("visually-hidden")},k=async e=>{e.preventDefault();const n=h.loginEmail.value,t=h.loginPassword.value;n&&t&&(h.backdrop.classList.add("backdrop--hidden"),h.boxSignInWithEmailModal.classList.add("visually-hidden"),h.boxSignInModal.classList.remove("visually-hidden"));try{await(0,d.signInWithEmailAndPassword)(m,n,t)}catch(e){L(e)}},_=new(0,d.GoogleAuthProvider);_.addScope("https://www.googleapis.com/auth/contacts.readonly"),_.setCustomParameters({login_hint:"user@example.com"});const f=e=>{e.preventDefault(),(0,d.signInWithPopup)(m,_).then((e=>{d.GoogleAuthProvider.credentialFromResult(e).accessToken;const n=e.user;(0,c.get)((0,c.child)(p,`users/${n.uid}`)).then((e=>{e.exists()||I(n.uid,n.displayName,n.email,n.photoURL)})).catch((e=>{console.error(e)}))})).catch((e=>{e.code,e.message,e.customData.email,d.GoogleAuthProvider.credentialFromError(e)}))};function I(e,n,t,o){(0,c.set)((0,c.ref)(g,"users/"+e),{username:n,email:t,profile_picture:o})}(0,a.smoothscroll)(),window.addEventListener("scroll",i.hideScrollUpBtn);const q=document.querySelector(".header_btn-queue"),w=document.querySelector(".header_btn-watched");w.classList.contains("current-btn")&&(0,r.fetchMovieByIdFromStorageWatched)(),q.classList.contains("current-btn")&&(0,s.fetchMovieByIdFromStorageQueue)(),q.addEventListener("click",(()=>{w.classList.remove("current-btn"),q.classList.add("current-btn"),(0,s.fetchMovieByIdFromStorageQueue)()})),w.addEventListener("click",(()=>{q.classList.remove("current-btn"),w.classList.add("current-btn"),(0,r.fetchMovieByIdFromStorageWatched)()}));
//# sourceMappingURL=my-library.7ce7fd37.js.map
